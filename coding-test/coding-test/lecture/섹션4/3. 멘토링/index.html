<html>
<head>
    <meta charset="UTF-8">
    <title>출력결과</title>
</head>
<body>
<script>
    function solution(test) {
        let answer = 0;
        const testing = test.length;
        const student = test[0].length;

        for (let i = 1; i <= student; i++) {
            for (let j = 1; j <= student; j++) {
                let count = 0;

                for (let k = 0; k < testing; k++) {
                    let pi = 0;
                    let pj = 0;
                    for (let s = 0; s < student; s++) {
                        if (test[k][s] === i) pi = s;
                        if (test[k][s] === j) pj = s;
                    }

                    if (pi < pj) count++;
                }

                if (count === testing) answer++;
            }
        }

        return answer;
    }

    function solution2(test) {
        let answer = 0;
        let obj = {};
        const testing = test.length;
        const student = test[0].length;

        for (let i = 0; i < testing; i++) {
            for (let j = 0; j < student; j++) {
                const current = test[i][j];

                if (!obj[current]) {
                    obj[current] = [student, 0];
                }

                obj[current][0] = Math.min(obj[current][0], j + 1);
                obj[current][1] = Math.max(obj[current][1], j + 1);
            }
        }

        for (let i = 1; i <= student; i++) {
            const current = obj[i];

            for (let j = i + 1; j <= student; j++) {
                const next = obj[j];

                if (current[0] < next[0] && current[1] <= next[0]) {
                    answer++;
                } else if (next[0] < current[0] && next[1] <= current[0]) {
                    answer++;
                }
            }
        }

        return answer;
    }

    let arr = [[3, 4, 1, 2], [4, 3, 2, 1], [3, 1, 4, 2]];
    console.log(solution(arr));
</script>
</body>
</html>