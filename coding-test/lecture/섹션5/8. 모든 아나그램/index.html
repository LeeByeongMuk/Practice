<html>
<head>
    <meta charset="UTF-8">
    <title>출력결과</title>
</head>
<body>
<script>
    function compareMaps(map1, map2) {
        if (map1.size !== map2.size) return false;
        for (let [key, value] of map1) {
            if (!map2.has(key) || map2.get(key) !== value) return false;
        }
        return true;
    }

    function solution(s, t) {
        let answer = 0;
        let tH = new Map();
        let sH = new Map();

        for (let str of t) {
            if (tH.has(str)) {
                tH.set(str, tH.get(str));
            } else {
                tH.set(str, 1);
            }
        }

        for (let i = 0; i < t.length - 1; i++) {
            const current = t[i];
            if (sH.has(current)) {
                sH.set(current, sH.get(current) + 1);
            } else {
                sH.set(current, 1);
            }
        }

        let lt = 0;
        for (let rt = t.length - 1; rt < s.length; rt++) {
            const current = s[rt];

            if (sH.has(current)) {
                sH.set(current, sH.get(current) + 1);
            } else {
                sH.set(current, 1);
            }

            if (compareMaps(tH, sH)) {
                answer++;
            }

            const first = s[lt];
            sH.set(first, sH.get(first) - 1);

            if (sH.get(first) === 0) {
                sH.delete(first);
            }
            lt++;
        }

        return answer;
    }

    function solution2(s, t) {
        let answer = 0;
        let tH = new Map();
        let sH = new Map();

        for (let str of t) {
            if (tH.has(str)) {
                tH.set(str, tH.get(str));
            } else {
                tH.set(str, 1);
            }
        }

        for (let i = 0; i < t.length; i++) {
            const current = s[i];
            if (sH.has(current)) {
                sH.set(current, sH.get(current) + 1);
            } else {
                sH.set(current, 1);
            }
        }

        let chk = true;
        for (let [key, value] of sH.entries()) {
            if (tH.get(key) !== value) {
                chk = false;
                break;
            }
        }
        if (chk) answer++;

        for (let i = t.length; i < s.length; i++) {
            const prev = s[i - t.length];
            const current = s[i];

            if (sH.get(prev) > 1) {
                sH.set(prev, sH.get(prev) - 1);
            } else {
                sH.delete(prev);
            }

            if (sH.has(current)) {
                sH.set(current, sH.get(current) + 1);
            } else {
                sH.set(current, 1);
            }

            chk = true;
            for (let [key, value] of sH.entries()) {
                if (tH.get(key) !== value) {
                    chk = false;
                    break;
                }
            }
            if (chk) answer++;
        }

        return answer;
    }

    let a = "bacaAacba";
    let b = "abc";
    console.log(solution(a, b));
</script>
</body>
</html>